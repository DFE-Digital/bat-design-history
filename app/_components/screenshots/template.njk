{%- set title = params.title or "Screenshots" -%}
{%- set headingLevel = params.headingLevel or 2 -%}
<section class="app-screenshots app-prose govuk-!-margin-top-9" id="screenshots">
  {%- if not params.hideContents %}
  <div class="govuk-!-display-none-print">
    <h{{ headingLevel }}>
      {{ title }}<a class="header-anchor" href="#{{ title | slug }}">#</a>
    </h{{ headingLevel }}>
    <ul class="govuk-list app-screenshots__contents">
      {%- for item in params.items %}
        <li>
          <a href="#{{ item.id or (item.text | slug) }}">{{ item.text }}</a>
        </li>
      {%- endfor %}
    </ul>
  </div>
  {%- endif %}
{%- for item in params.items -%}
  {%- set id = item.id or (item.text | slug) -%}
  {%- set file = item.img.src or (id + ".png") -%}
  {%- set alt = item.img.alt or ("Screenshot of " + item.text) -%}
  <figure class="app-screenshots__screenshot" id="{{ id }}">
    <h{{ headingLevel + 1 }} class="govuk-heading-s">
      {{ item.text }}<a class="header-anchor" href="#{{ id }}">#</a>
    </h{{ headingLevel + 1 }}>
    <a href="{{ file }}">
      <img src="{{ file }}" alt="{{ alt }}">
    </a>
    {%- if item.caption -%}
      <figcaption>{{ item.caption | markdown | safe }}</figcaption>
    {%- endif -%}
  </figure>
{%- endfor %}
</section>
