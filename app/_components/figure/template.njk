{%- from "../embed/macro.njk" import appEmbed with context -%}
{%- from "../image/macro.njk" import appImage with context -%}
<figure class="app-figure">
{% if params.title %}
  <figcaption class="govuk-heading-s">
    {% if params.id %}
      <a class="header-anchor" href="#{{ params.id }}">#</a>
    {% endif %}
    {{ params.title }}
  </figcaption>
{% endif %}
{% if params.embed %}
  {{ appEmbed({
    placeholder: params.embed.placeholder,
    src: params.embed.src,
    youtubeId: params.embed.youtubeId,
    title: params.embed.title
  }) | indent(2) }}
{% endif %}
{% if params.image %}
  {{ appImage({
    path: params.image.path,
    file: params.image.file,
    alt: params.image.alt
  }) | indent(2) }}
{% endif %}
{% if params.caption %}
  <figcaption class="app-figure__caption app-prose">
    {{ params.caption | markdown | safe }}
  </figcaption>
{% endif %}
</figure>
