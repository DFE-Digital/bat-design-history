{%- set title = params.title or "Screenshots" -%}
{%- set id = params.id or (title | slug) -%}
{%- set headingLevel = params.headingLevel or 2 -%}
<section class="app-screenshots app-prose govuk-!-margin-top-9">
  {% if not params.hideContents %}
  <div class="govuk-!-display-none-print">
    <h{{ headingLevel }}>
      {{ title }}<a class="header-anchor" href="#{{ id }}" id="{{ id }}">#</a>
    </h{{ headingLevel }}>
    <ul class="govuk-list app-screenshots__contents">
      {% for item in params.items %}
        {%- set itemTitle = item.title or item -%}
        <li>
          <a href="#{{ item.id or (itemTitle | slug) }}">{{ itemTitle }}</a>
        </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}
{% for item in params.items -%}
  {%- set itemTitle = item.title or item -%}
  {%- set id = item.id or (itemTitle | slug) -%}
  {%- set imageSrc = item.src or (id + ".png") -%}
  {%- set imageAlt = item.alt or ("Screenshot of " + itemTitle) -%}
  <figure class="app-screenshots__screenshot" id="{{ id }}">
    <h{{ headingLevel + 1 }} class="govuk-heading-s">
      {{ itemTitle }}<a class="header-anchor" href="#{{ id }}">#</a>
    </h{{ headingLevel + 1 }}>
    <a href="{{ imageSrc }}">
      <img src="{{ imageSrc }}" alt="{{ imageAlt }}">
    </a>
    {% if item.caption %}
      <figcaption>
        {{ item.caption | markdown | safe }}
      </figcaption>
    {% endif %}
  </figure>
{%- endfor %}
</section>
